import{_ as M,w as R,j as N,k,b as D,e as i,l as m,A as c,m as T,P as b,n as F,C as O,q as P,c as n,f as t,s as g,F as S,u as E,t as p,x as A,y,z as Y,B as j,o as a,p as V,i as z,D as B,E as H}from"./index.6465808d.js";const L={setup(){const r=Y(),d=j(),u=r.params.isbn;async function e(){try{let o=r.params.isbn;await k.getBookByISBN(o)}catch(o){b.error(o,"GET BOOK BY ISBN PROBS YO")}}async function h(){try{const o=r.params.isbn;await H.getCommentsByIsbn(o)}catch(o){m.error(o),b.error(o.message)}}function C(){c.expanded=!1}return R(()=>{r.params.isbn&&(h(),e())}),N(()=>{k.clearBooks(),C()}),D(()=>{window.scrollTo(0,0)}),{activeBook:u,account:i(()=>c.account),comments:i(()=>c.comments),myClubs:i(()=>{let o=[];return c.myClubs.forEach(s=>{s.clubBooks.find(_=>_.isbn==u.isbn)?o.push(s):o.unshift(s)}),o}),googleBook:i(()=>c.googleBook),expanded:i(()=>c.expanded),myBooks:i(()=>c.readBooks),alreadyMyBook:i(()=>c.readBooks.find(o=>o.isbn==u)),booksInTheClub:i(()=>c.myClubs.find(o=>o.clubBooks.find(s=>s.isbn==r.params.isbn))),onImageError(){event.target.src=this.googleBook.googleImg},expand(){m.log(c.expanded),c.expanded?c.expanded=!1:c.expanded=!0,m.log(c.expanded)},async addBookToClub(o){try{const s=this.googleBook;s.isbn=r.params.isbn,s.clubId=o,s.coverImg=this.googleBook.img,s.altImg=this.googleBook.googleImg,m.log(s,"[book that is being added to the club TAYLOR ADDED THIS]"),await T.addBookToClub(s),d.push({name:"Club",params:{clubId:o}})}catch(s){m.log(s),b.error(s.message)}},async addBookToReadBooks(){try{const o=this.googleBook;o.isbn=r.params.isbn,o.coverImg=this.googleBook.img,o.accountId=c.account.id,o.altImg=this.googleBook.googleImg,await b.confirm("Have you read this book?")&&await k.addBookToReadBooks(o)}catch(o){m.log(o),b.error(o.message)}},async getMyClubs(){try{let o=c.account.id;m.log(o,"getmyclub profile id on active book page"),await T.getMyClubs(o)}catch(o){b.error(o)}}}},components:{AddToClubButton:F,CommentComponent:O,CreateCommentForm:P}},x=r=>(V("data-v-defe719e"),r=r(),z(),r),U={key:0,class:"container-fluid bg-primary"},q={class:"row"},G={class:"col-12 col-md-4 my-4 px-4"},K={class:"d-flex justify-content-center"},J=["src","alt"],Q={key:0},W={class:"mt-1 mb-4 d-flex justify-content-between"},X={key:0},Z={key:1},$={class:"dropdown"},oo={class:"dropdown-menu"},eo={key:0,class:"dropdown-item"},to={class:"col-12 col-md-7"},so={class:"text-center my-3"},no={class:"mt-2 mb-4 fs-3 px-3 py-0 text-end"},ao={class:"mt-2 mb-5 fs-4 px-3 py-0"},lo={class:"d-flex flex-column align-items-center"},co={class:"container"},ro={class:"row"},io={class:"col-12 col-md-8 rounded box-shadow m-auto my-4 bg-custom-success px-md-5"},mo={class:"px-md-5 py-5"},go=x(()=>t("h3",{class:"text-center py-md-3"}," Book Comments! ",-1)),bo={key:0,class:""},uo={class:"mt-4 p-2"},_o={key:1},ko=x(()=>t("div",{class:"bg-dark text-light p-3 rounded box-shadow indent"},[t("p",null,"no comments... yet?")],-1)),po=[ko],yo={key:2,class:"d-flex flex-column align-items-center"},Bo=x(()=>t("div",null,null,-1));function xo(r,d,u,e,h,C){var f,v,I,w;const o=B("AddToClubButton"),s=B("CreateCommentForm"),_=B("CommentComponent");return e.googleBook?(a(),n("div",U,[t("div",q,[t("div",G,[t("div",K,[t("img",{class:"book-img pb-3",src:(f=e.googleBook)==null?void 0:f.img,alt:e.googleBook.title,onError:d[0]||(d[0]=(...l)=>e.onImageError&&e.onImageError(...l))},null,40,J)]),e.account.id?(a(),n("div",Q,[t("div",W,[e.alreadyMyBook?g("",!0):(a(),n("div",X,[t("button",{onClick:d[1]||(d[1]=l=>e.addBookToReadBooks()),class:"btn bg-danger selectable"},"Add To My Books")])),e.myClubs?(a(),n("div",Z,[t("div",null,[t("div",$,[t("button",{class:"btn btn-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:d[2]||(d[2]=(...l)=>e.getMyClubs&&e.getMyClubs(...l))}," Add Book To Club "),t("ul",oo,[e.myClubs.length==0?(a(),n("li",eo,"You are not in any clubs")):g("",!0),(a(!0),n(S,null,E(e.myClubs,l=>(a(),n("div",null,[y(o,{club:l},null,8,["club"])]))),256))])])])])):g("",!0)])])):g("",!0)]),t("div",to,[t("h1",so,p((v=e.googleBook)==null?void 0:v.title),1),t("p",no,"-"+p((I=e.googleBook)==null?void 0:I.author),1),t("p",ao,[t("div",{class:A(e.expanded?"expanded":"expandable")},p((w=e.googleBook)==null?void 0:w.description),3)]),t("div",lo,[e.expanded?(a(),n("button",{key:0,onClick:d[3]||(d[3]=(...l)=>e.expand&&e.expand(...l)),class:"btn-cool text-center"},"read less")):(a(),n("button",{key:1,onClick:d[4]||(d[4]=(...l)=>e.expand&&e.expand(...l)),class:"btn-cool text-center"},"read more"))])])]),t("div",co,[t("div",ro,[t("div",io,[t("div",mo,[go,e.account.id?(a(),n("div",bo,[y(s)])):g("",!0),t("div",uo,[e.comments.length>0?(a(),n("div",{key:0,class:A(e.expanded?"expanded":"expandable")},[(a(!0),n(S,null,E(e.comments,l=>(a(),n("div",null,[y(_,{comment:l},null,8,["comment"])]))),256))],2)):(a(),n("div",_o,po)),e.comments.length>2?(a(),n("div",yo,[e.expanded?(a(),n("button",{key:0,onClick:d[5]||(d[5]=(...l)=>e.expand&&e.expand(...l)),class:"btn-cool text-center"},"read less")):(a(),n("button",{key:1,onClick:d[6]||(d[6]=(...l)=>e.expand&&e.expand(...l)),class:"btn-cool text-center"},"read more"))])):g("",!0)])])]),Bo])])])):g("",!0)}const Co=M(L,[["render",xo],["__scopeId","data-v-defe719e"]]);export{Co as default};
