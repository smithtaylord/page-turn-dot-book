import{_ as R,w as N,j as D,k as y,b as F,e as i,l as m,A as c,m as T,P as b,n as O,C as P,q as Y,c as n,f as t,s as g,F as S,u as E,t as k,x as A,y as p,z as j,B as V,o as a,p as z,i as H,D as B,E as L}from"./index.d2641df4.js";const U={setup(){const r=j(),d=V(),_=r.params.isbn;async function o(){try{let e=r.params.isbn;await y.getBookByISBN(e)}catch(e){b.error(e,"GET BOOK BY ISBN PROBS YO")}}async function h(){try{const e=r.params.isbn;await L.getCommentsByIsbn(e)}catch(e){m.error(e),b.error(e.message)}}return N(()=>{r.params.isbn&&(h(),o())}),D(()=>{y.clearBooks()}),F(()=>{window.scrollTo(0,0)}),{activeBook:_,account:i(()=>c.account),comments:i(()=>c.comments),myClubs:i(()=>{let e=[];return c.myClubs.forEach(s=>{s.clubBooks.find(u=>u.isbn==_.isbn)?e.push(s):e.unshift(s)}),e}),googleBook:i(()=>c.googleBook),expanded:i(()=>c.expanded),myBooks:i(()=>c.readBooks),alreadyMyBook:i(()=>c.readBooks.find(e=>e.isbn==_)),booksInTheClub:i(()=>c.myClubs.find(e=>e.clubBooks.find(s=>s.isbn==r.params.isbn))),onImageError(){event.target.src=this.googleBook.googleImg},expand(){m.log(c.expanded),c.expanded?c.expanded=!1:c.expanded=!0,m.log(c.expanded)},async addBookToClub(e){try{const s=this.googleBook;s.isbn=r.params.isbn,s.clubId=e,s.coverImg=this.googleBook.img,s.altImg=this.googleBook.googleImg,m.log(s,"[book that is being added to the club TAYLOR ADDED THIS]"),await T.addBookToClub(s),d.push({name:"Club",params:{clubId:e}})}catch(s){m.log(s),b.error(s.message)}},async addBookToReadBooks(){try{const e=this.googleBook;e.isbn=r.params.isbn,e.coverImg=this.googleBook.img,e.accountId=c.account.id,e.altImg=this.googleBook.googleImg,await b.confirm("Have you read this book?")&&await y.addBookToReadBooks(e)}catch(e){m.log(e),b.error(e.message)}},async getMyClubs(){try{let e=c.account.id;m.log(e,"getmyclub profile id on active book page"),await T.getMyClubs(e)}catch(e){b.error(e)}}}},components:{AddToClubButton:O,CommentComponent:P,CreateCommentForm:Y}},x=r=>(z("data-v-55d78ddb"),r=r(),H(),r),q={key:0,class:"container-fluid bg-primary"},G={class:"row"},K={class:"col-12 col-md-4 my-4 px-4"},J={class:"d-flex justify-content-center"},Q=["src","alt"],W={key:0},X={class:"mt-1 mb-4 d-flex justify-content-between"},Z={key:0},$={key:1},oo={class:"dropdown"},eo={class:"dropdown-menu"},to={key:0,class:"dropdown-item"},so={class:"col-12 col-md-7"},no={class:"text-center my-3"},ao={class:"mt-2 mb-4 fs-3 px-3 py-0 text-end"},lo={class:"mt-2 mb-5 fs-4 px-3 py-0"},co={class:"d-flex flex-column align-items-center"},ro={class:"my-3 fs-3 p-0"},io={class:"container"},mo={class:"row"},go={class:"col-12 col-md-8 rounded box-shadow m-auto my-4 bg-custom-success px-md-5"},bo={class:"px-md-5 pb-5"},_o=x(()=>t("h3",{class:"text-center py-md-3"}," Book Comments! ",-1)),ko={key:0,class:""},uo={class:"mt-4 p-2"},yo={key:1},po=x(()=>t("div",{class:"bg-dark text-light p-3 rounded box-shadow indent"},[t("p",null,"no comments... yet?")],-1)),Bo=[po],xo={key:2,class:"d-flex flex-column align-items-center"},ho=x(()=>t("div",null,null,-1));function Co(r,d,_,o,h,e){var C,v,f,I,w;const s=B("AddToClubButton"),u=B("CreateCommentForm"),M=B("CommentComponent");return o.googleBook?(a(),n("div",q,[t("div",G,[t("div",K,[t("div",J,[t("img",{class:"book-img",src:(C=o.googleBook)==null?void 0:C.img,alt:o.googleBook.title,onError:d[0]||(d[0]=(...l)=>o.onImageError&&o.onImageError(...l))},null,40,Q)]),o.account.id?(a(),n("div",W,[t("div",X,[o.alreadyMyBook?g("",!0):(a(),n("div",Z,[t("button",{onClick:d[1]||(d[1]=l=>o.addBookToReadBooks()),class:"btn bg-danger selectable"},"Add To My Books")])),o.myClubs?(a(),n("div",$,[t("div",null,[t("div",oo,[t("button",{class:"btn btn-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:d[2]||(d[2]=(...l)=>o.getMyClubs&&o.getMyClubs(...l))}," Add Book To Club "),t("ul",eo,[o.myClubs.length==0?(a(),n("li",to,"You are not in any clubs")):g("",!0),(a(!0),n(S,null,E(o.myClubs,l=>(a(),n("div",null,[p(s,{club:l},null,8,["club"])]))),256))])])])])):g("",!0)])])):g("",!0)]),t("div",so,[t("h1",no,k((v=o.googleBook)==null?void 0:v.title),1),t("p",ao,"-"+k((f=o.googleBook)==null?void 0:f.author),1),t("p",lo,[t("div",{class:A(o.expanded?"expanded":"expandable")},k((I=o.googleBook)==null?void 0:I.description),3)]),t("div",co,[o.expanded?(a(),n("button",{key:0,onClick:d[3]||(d[3]=(...l)=>o.expand&&o.expand(...l)),class:"btn-cool text-center"},"read less")):(a(),n("button",{key:1,onClick:d[4]||(d[4]=(...l)=>o.expand&&o.expand(...l)),class:"btn-cool text-center"},"read more"))]),t("p",ro,k((w=o.googleBook)==null?void 0:w.genre),1)])]),t("div",io,[t("div",mo,[t("div",go,[t("div",bo,[_o,o.account.id?(a(),n("div",ko,[p(u)])):g("",!0),t("div",uo,[o.comments.length>0?(a(),n("div",{key:0,class:A(o.expanded?"expanded":"expandable")},[(a(!0),n(S,null,E(o.comments,l=>(a(),n("div",null,[p(M,{comment:l},null,8,["comment"])]))),256))],2)):(a(),n("div",yo,Bo)),o.comments.length>2?(a(),n("div",xo,[o.expanded?(a(),n("button",{key:0,onClick:d[5]||(d[5]=(...l)=>o.expand&&o.expand(...l)),class:"btn-cool text-center"},"read less")):(a(),n("button",{key:1,onClick:d[6]||(d[6]=(...l)=>o.expand&&o.expand(...l)),class:"btn-cool text-center"},"read more"))])):g("",!0)])])]),ho])])])):g("",!0)}const fo=R(U,[["render",Co],["__scopeId","data-v-55d78ddb"]]);export{fo as default};
